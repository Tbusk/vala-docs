<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="author" title="About these documents" href="../../about.html" /><link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Why Distribute Bindings Upstream" href="upstream-guide.html" /><link rel="prev" title="Bindings" href="../bindings.html" />

    <link rel="shortcut icon" href="../../_static/favicon.png"/><!-- Generated with Sphinx 6.2.0 and Furo 2024.08.06 -->
        <title>Generating a VAPI with GObject Introspection - Vala Documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?digest=04c057b233f3c8d71940eee6080f658a04e2027d" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?digest=cf727022eb7470bc603c08d2e55c3247faec75c9" />
    <link rel="stylesheet" type="text/css" href="../../_static/gnome.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-brand-primary: #A56DE2;
  --color-brand-content: #A56DE2;
  --font-stack: Cantarell, -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #A56DE2;
  --color-brand-content: #A56DE2;
  --font-stack: Cantarell, -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #A56DE2;
  --color-brand-content: #A56DE2;
  --font-stack: Cantarell, -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji;
  
      }
    }
  }
</style></head>
  <body>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Vala Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>

      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>

        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/logo.png" alt="Logo"/>
  </div>

  
  <span class="sidebar-brand-text">Vala Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation-guide.html">Installation Guide</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../tutorials/gui-programming.html">GUI Programming</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of GUI Programming</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../tutorials/gui-programming/gtk4-samples.html">GTK4 Samples</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of GTK4 Samples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/gui-programming/gtk4-samples/minimal-app.html">Minimal App</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/gui-programming/gtk4-samples/basic-app.html">Basic App</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/gui-programming/gtk4-samples/synchronising-widgets.html">Synchronising Widgets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/gui-programming/gtk4-samples/text-file-viewer.html">Text File Viewer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/gui-programming/gtk4-samples/list-view.html">ListView</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/gui-programming/gtk4-samples/list-view-check-buttons.html">ListView with CheckButtons</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/gui-programming/gtk4-samples/column-view.html">ColumnView</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/gui-programming/gtk4-samples/clipboard.html">Clipboard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/gui-programming/gtk4-samples/entry-completion-two-cells.html">Entry Completion with Two Cells</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference external" href="https://developer.gnome.org/documentation/tutorials.html">GNOME Developer Documenation - Tutorials</a></li>
<li class="toctree-l3"><a class="reference external" href="https://docs.elementary.io/develop/writing-apps/the-basic-setup">elementary OS - Writing Apps</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../tutorials/programming-language.html">Programming Language</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Programming Language</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../tutorials/programming-language/main.html">Main Tutorial</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Main Tutorial</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/programming-language/main/01-00-first-program.html">1. First Program</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../tutorials/programming-language/main/02-00-basics.html">2. Basics</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of 2. Basics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/02-00-basics/02-01-source-files-and-compilation.html">2.1. Source Files and Compilation</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/02-00-basics/02-02-syntax-overview.html">2.2. Syntax Overview</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/02-00-basics/02-03-comments.html">2.3. Comments</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/02-00-basics/02-04-data-types.html">2.4. Data Types</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/02-00-basics/02-05-operators.html">2.5. Operators</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/02-00-basics/02-06-control-structures.html">2.6. Control Structures</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/02-00-basics/02-07-language-elements.html">2.7. Language Elements</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/02-00-basics/02-08-code-attributes.html">2.8. Code Attributes</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../tutorials/programming-language/main/03-00-object-oriented-programming.html">3. Object Oriented Programming</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of 3. Object Oriented Programming</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/03-00-object-oriented-programming/03-01-basics.html">3.1. Basics</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/03-00-object-oriented-programming/03-02-construction.html">3.2. Construction</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/03-00-object-oriented-programming/03-03-destruction.html">3.3. Destruction</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/03-00-object-oriented-programming/03-04-signals.html">3.4. Signals</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/03-00-object-oriented-programming/03-05-properties.html">3.5. Properties</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/03-00-object-oriented-programming/03-06-inheritance.html">3.6. Inheritance</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/03-00-object-oriented-programming/03-07-abstract-classes.html">3.7. Abstract Classes</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/03-00-object-oriented-programming/03-08-interfaces.html">3.8. Interfaces</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/03-00-object-oriented-programming/03-09-polymorphism.html">3.9. Polymorphism</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/03-00-object-oriented-programming/03-10-method-hiding.html">3.10. Method Hiding</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/03-00-object-oriented-programming/03-11-run-time-type-information.html">3.11. Run-Time Type Information</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/03-00-object-oriented-programming/03-12-dynamic-type-casting.html">3.12. Dynamic Type Casting</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/03-00-object-oriented-programming/03-13-generics.html">3.13. Generics</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/03-00-object-oriented-programming/03-14-gobject-style-construction.html">3.14. GObject-Style Construction</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../tutorials/programming-language/main/04-00-advanced-features.html">4. Advanced Features</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of 4. Advanced Features</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/04-00-advanced-features/04-01-assertions-and-contract-programming.html">4.1. Assertions and Contract Programming</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/04-00-advanced-features/04-02-error-handling.html">4.2. Error Handling</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/04-00-advanced-features/04-03-parameter-directions.html">4.3. Parameter Directions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/04-00-advanced-features/04-04-collections.html">4.4. Collections</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/04-00-advanced-features/04-05-methods-with-syntax-support.html">4.5. Methods With Syntax Support</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/04-00-advanced-features/04-06-multi-threading.html">4.6. Multi-Threading</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/04-00-advanced-features/04-07-the-main-loop.html">4.7. The Main Loop</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/04-00-advanced-features/04-08-asynchronous-methods.html">4.8. Asynchronous Methods</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/04-00-advanced-features/04-09-weak-references.html">4.9. Weak References</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/04-00-advanced-features/04-10-ownership.html">4.10. Ownership</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/04-00-advanced-features/04-11-variable-length-argument-lists.html">4.11. Variable-Length Argument Lists</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/04-00-advanced-features/04-12-pointers.html">4.12. Pointers</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/04-00-advanced-features/04-13-non-object-classes.html">4.13. Non-Object classes</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/04-00-advanced-features/04-14-d-bus-integration.html">4.14. D-Bus Integration</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/04-00-advanced-features/04-15-profiles.html">4.15. Profiles</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../tutorials/programming-language/main/05-00-experimental-features.html">5. Experimental Features</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 5. Experimental Features</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/05-00-experimental-features/05-01-chained-relational-expressions.html">5.1. Chained Relational Expressions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/05-00-experimental-features/05-02-regular-expression-literals.html">5.2. Regular Expression Literals</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/05-00-experimental-features/05-03-strict-non-null-mode.html">5.3. Strict Non-Null Mode</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../tutorials/programming-language/main/06-00-libraries.html">6. Libraries</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of 6. Libraries</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/06-00-libraries/06-01-using-libraries.html">6.1. Using Libraries</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/06-00-libraries/06-02-creating-a-library.html">6.2. Creating a Library</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/06-00-libraries/06-03-binding-libraries-with-vapi-files.html">6.3. Binding Libraries with VAPI Files</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/06-00-libraries/06-04-abi-and-api-design-choices.html">6.4. ABI and API Design Choices</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/06-00-libraries/06-05-binding-to-vala-libraries-from-other-languages.html">6.5. Binding to Vala Libraries from Other Languages</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/06-00-libraries/06-06-using-autotools.html">6.6. Using Autotools</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../tutorials/programming-language/main/07-00-tools.html">7. Tools</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of 7. Tools</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/07-00-tools/07-01-valac.html">7.1. valac</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/07-00-tools/07-02-valadoc.html">7.2. valadoc</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/07-00-tools/07-03-vapigen.html">7.3. vapigen</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/07-00-tools/07-04-vala-gen-introspect.html">7.4. vala-gen-introspect</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../tutorials/programming-language/main/08-00-techniques.html">8. Techniques</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of 8. Techniques</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/08-00-techniques/08-01-debugging.html">8.1. Debugging</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../tutorials/programming-language/main/08-00-techniques/08-02-using-glib.html">8.2. Using GLib</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../tooling/index.html">Tooling</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of Tooling</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tooling/build-systems.html">Build Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tooling/code-editors-and-ides.html">Code Editors and IDEs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tooling/language-server-protocol-support.html">Language Server Protocol Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tooling/other-tools.html">Other Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tooling/syntax-support.html">Syntax Support</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../contributor-guide/index.html">Contributor Guide</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of Contributor Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../contributor-guide/compiler-guide.html">Compiler Guide</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of Compiler Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contributor-guide/compiler-guide/01-00-project-information.html">1. Project Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contributor-guide/compiler-guide/02-00-environment-setup.html">2. Environment Setup</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../contributor-guide/compiler-guide/03-00-the-vala-compiler.html">3. The Vala Compiler</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of 3. The Vala Compiler</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../contributor-guide/compiler-guide/03-00-the-vala-compiler/03-01-vala-in-a-nutshell.html">3.1. Vala in a Nutshell</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../contributor-guide/compiler-guide/03-00-the-vala-compiler/03-02-parser.html">3.2. Parser</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../contributor-guide/compiler-guide/03-00-the-vala-compiler/03-03-semantic-analyzer.html">3.3. Semantic Analyzer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../contributor-guide/compiler-guide/03-00-the-vala-compiler/03-04-symbol-resolution.html">3.4. Symbol Resolution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../contributor-guide/compiler-guide/03-00-the-vala-compiler/03-05-flow-analyzer.html">3.5. Flow Analyzer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../contributor-guide/compiler-guide/03-00-the-vala-compiler/03-06-c-code-generation.html">3.6. C Code Generation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../contributor-guide/compiler-guide/03-00-the-vala-compiler/03-07-c-code-compilation-and-linking.html">3.7. C Code Compilation and Linking</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../contributor-guide/compiler-guide/04-00-vala-bindings-vapi.html">4. Vala Bindings - VAPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contributor-guide/compiler-guide/05-00-internal-libgee.html">5. libgee Internal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contributor-guide/compiler-guide/06-00-other-tools.html">6. Other Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contributor-guide/compiler-guide/07-00-testing.html">7. Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contributor-guide/compiler-guide/08-00-documentation.html">8. Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contributor-guide/compiler-guide/09-00-build-system.html">9. Build System</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Developer Guides</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of Developer Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="../bindings.html">Bindings</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of Bindings</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Generating a VAPI with GObject Introspection</a></li>
<li class="toctree-l3"><a class="reference internal" href="upstream-guide.html">Why Distribute Bindings Upstream</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="writing-a-vapi-manually.html">Writing a VAPI Manually</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of Writing a VAPI Manually</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="writing-a-vapi-manually/01-00-prerequisites.html">1. Prerequisites</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="writing-a-vapi-manually/02-00-getting-started.html">2. Getting Started</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of 2. Getting Started</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/02-00-getting-started/02-01-the-vapi-file.html">2.1. The VAPI File</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/02-00-getting-started/02-02-attribution-and-license.html">2.2. Attribution and License</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/02-00-getting-started/02-03-the-ccode-attribute.html">2.3. The CCode Attribute</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/02-00-getting-started/02-04-create-a-root-namespace.html">2.4. Create a Root Namespace</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/02-00-getting-started/02-05-include-the-c-header-files.html">2.5. Include the C Header Files</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/02-00-getting-started/02-06-symbol-name-translations.html">2.6. Symbol Name Translations</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/02-00-getting-started/02-07-code-formatting-conventions.html">2.7. Code Formatting Conventions</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/02-00-getting-started/02-08-documentation-and-valadoc-org.html">2.8. Documentation and Valadoc.org</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/02-00-getting-started/02-09-the-version-attribute.html">2.9. The Version Attribute</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="writing-a-vapi-manually/03-00-using-auto-memory-management.html">3. Using Vala’s Automatic Memory Management</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle navigation of 3. Using Vala’s Automatic Memory Management</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/03-00-using-auto-memory-management/03-01-pointers-in-c.html">3.1. Pointers in C (or what all these *’s mean)</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/03-00-using-auto-memory-management/03-02-constants-the-stack-and-the-heap-in-c.html">3.2. Constants, the Stack and the Heap in C</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/03-00-using-auto-memory-management/03-03-the-concept-of-ownership-in-vala.html">3.3. The Concept of “Ownership” in Vala</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/03-00-using-auto-memory-management/03-04-binding-to-c-heap-handnlers.html">3.4. Binding to C Heap Handlers</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="writing-a-vapi-manually/04-00-recognizing-vala-semantics-in-c-code.html">4. Recognizing Vala Semantics in C Code</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle navigation of 4. Recognizing Vala Semantics in C Code</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/04-00-recognizing-vala-semantics-in-c-code/04-01-constants.html">4.1. Constants</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/04-00-recognizing-vala-semantics-in-c-code/04-02-enums-and-flags.html">4.2. Enums and Flags</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/04-00-recognizing-vala-semantics-in-c-code/04-03-simple-type-structs.html">4.3. Simple Type Structs</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/04-00-recognizing-vala-semantics-in-c-code/04-04-structs.html">4.4. Structs</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/04-00-recognizing-vala-semantics-in-c-code/04-05-compact-classes.html">4.5. Compact Classes</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/04-00-recognizing-vala-semantics-in-c-code/04-06-functions.html">4.6. Functions</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/04-00-recognizing-vala-semantics-in-c-code/04-07-delegates.html">4.7. Delegates</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="writing-a-vapi-manually/05-00-fundamentals-of-binding-a-c-function.html">5. Fundamentals of Binding a C Function</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle navigation of 5. Fundamentals of Binding a C Function</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/05-00-fundamentals-of-binding-a-c-function/05-01-out-and-reference-parameters-and-return-values.html">5.1. Out and Reference Parameters and Return Values</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/05-00-fundamentals-of-binding-a-c-function/05-02-ownership.html">5.2. Ownership</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/05-00-fundamentals-of-binding-a-c-function/05-03-nullability.html">5.3. Nullability</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/05-00-fundamentals-of-binding-a-c-function/05-04-static-methods.html">5.4. Static Methods</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/05-00-fundamentals-of-binding-a-c-function/05-05-changing-the-position-of-generated-arguments.html">5.5. Changing the Position of Generated Arguments</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/05-00-fundamentals-of-binding-a-c-function/05-06-default-values-and-changing-an-argument-s-position.html">5.6. Default Values and Changing an Argument’s Position</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/05-00-fundamentals-of-binding-a-c-function/05-07-adapting-a-signature-with-a-vala-wrapper.html">5.7. Adapting a Signature with a Vala Wrapper</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/05-00-fundamentals-of-binding-a-c-function/05-08-variadic-arguments.html">5.8. Variadic Arguments (a.k.a. “…”)</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/05-00-fundamentals-of-binding-a-c-function/05-09-functions-that-do-not-return.html">5.9. Functions That Do Not Return</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/05-00-fundamentals-of-binding-a-c-function/05-10-methods-that-change-the-instance-reference.html">5.10. Methods that Change the Instance Reference</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/05-00-fundamentals-of-binding-a-c-function/05-11-methods-that-destroy-the-instance-reference.html">5.11. Methods that Destroy the Instance Reference</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="writing-a-vapi-manually/06-00-adding-vala-friendly-semantics.html">6. Adding Vala Friendly Semantics</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle navigation of 6. Adding Vala Friendly Semantics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/06-00-adding-vala-friendly-semantics/06-01-to-string-methods.html">6.1. to_string () Methods</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/06-00-adding-vala-friendly-semantics/06-02-properties.html">6.2. Properties</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/06-00-adding-vala-friendly-semantics/06-03-collections.html">6.3. Collections</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="writing-a-vapi-manually/07-00-binding-a-c-function-s-parameter-and-return-types.html">7. Binding a C Function’s Parameter and Return Types</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle navigation of 7. Binding a C Function’s Parameter and Return Types</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/07-00-binding-a-c-function-s-parameter-and-return-types/07-01-basic-types.html">7.1. Basic Types</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/07-00-binding-a-c-function-s-parameter-and-return-types/07-02-structs.html">7.2. Structs</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/07-00-binding-a-c-function-s-parameter-and-return-types/07-03-arrays.html">7.3. Arrays</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/07-00-binding-a-c-function-s-parameter-and-return-types/07-04-strings-and-buffers.html">7.4. Strings and Buffers</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/07-00-binding-a-c-function-s-parameter-and-return-types/07-05-function-pointers.html">7.5. Function Pointers</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/07-00-binding-a-c-function-s-parameter-and-return-types/07-06-parameters-of-variable-type-generics.html">7.6. Parameters of Variable Type (Generics)</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/07-00-binding-a-c-function-s-parameter-and-return-types/07-07-pointers.html">7.7. Pointers</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="writing-a-vapi-manually/08-00-binding-a-c-struct-s-fields.html">8. Binding a C Struct’s Fields</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><div class="visually-hidden">Toggle navigation of 8. Binding a C Struct’s Fields</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/08-00-binding-a-c-struct-s-fields/08-01-structs.html">8.1. Structs</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/08-00-binding-a-c-struct-s-fields/08-02-pointers-to-structs.html">8.2. Pointers to Structs</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/08-00-binding-a-c-struct-s-fields/08-03-arrays.html">8.3. Arrays</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/08-00-binding-a-c-struct-s-fields/08-04-function-pointers.html">8.4. Function Pointers</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/08-00-binding-a-c-struct-s-fields/08-05-unions.html">8.5. Unions</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="writing-a-vapi-manually/09-00-extra-hints.html">9. Extra Hints</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="writing-a-vapi-manually/10-00-awkward-situations.html">10. Awkward Situations</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><div class="visually-hidden">Toggle navigation of 10. Awkward Situations</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/10-00-awkward-situations/10-01-array-lengths.html">10.1. Array Lengths</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/10-00-awkward-situations/10-02-dependently-typed-ownership.html">10.2. Dependently Typed Ownership</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/10-00-awkward-situations/10-03-member-length.html">10.3. Member Length</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/10-00-awkward-situations/10-04-owned-array-of-unowned-objects.html">10.4. Owned Array of Unowned Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="writing-a-vapi-manually/10-00-awkward-situations/10-05-shared-context-delgates.html">10.5. Shared Context Delegates</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../documentation.html">Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" role="switch" type="checkbox"/><label for="toctree-checkbox-28"><div class="visually-hidden">Toggle navigation of Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../documentation/vala-for-csharp-devs.html">Vala for C# Programmers</a><input class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" role="switch" type="checkbox"/><label for="toctree-checkbox-29"><div class="visually-hidden">Toggle navigation of Vala for C# Programmers</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/01-sources-files.html">Source Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/02-compilation.html">Compilation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/03-naming-conventions.html">Naming Conventions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/04-main-entry-point.html">Main Entry Point</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/05-system-namespace.html">System Namespace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/06-value-types.html">Value Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/07-verbatim-string-literals.html">Verbatim String Literals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/08-documentation-comments.html">Documentation Comments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/09-object-base-class.html">Object Base Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/10-method-overloading.html">Method Overloading</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/11-multiple-constructors.html">Multiple Constructors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/12-constructor-chaining.html">Constructor Chaining</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/13-delegates-lambdas.html">Delegates / Lambdas</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/14-events.html">Events</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/15-interfaces.html">Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/16-enums.html">Enums</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/17-struct-initialization.html">Struct Initialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/18-multi-dimensional-arrays.html">Multi-Dimensional Arrays</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/19-nullable-types.html">Nullable Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/20-code-attributes.html">Code Attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/21-properties.html">Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/22-exceptions.html">Exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/23-argument-checking.html">Argument Checking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/24-unsafe-code-and-pointers.html">Unsafe Code and Pointers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/25-conditional-compilation-directives.html">Conditional Compilation Directives</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/26-resource-disposing.html">Resource Disposing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/27-memory-management.html">Memory Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/28-asynchronous-calls.html">Asynchronous Calls</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/29-static-constructors.html">Static Constructors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/30-external-methods.html">External Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/31-reflection.html">Reflection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/32-not-available.html">Not Available</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/33-collections.html">Collections</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/34-indexers.html">Indexers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/35-io-network-sockets.html">IO, Network Sockets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/36-console-input-output.html">Console Input / Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/37-gtk-demo-app.html">GTK+ Demo App</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/vala-for-csharp-devs/38-bindings.html">Bindings</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../documentation/valadoc-guide.html">Valadoc Guide</a><input class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" role="switch" type="checkbox"/><label for="toctree-checkbox-30"><div class="visually-hidden">Toggle navigation of Valadoc Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../documentation/valadoc-guide/01-00-quick-start.html">1. Quick Start</a></li>
<li class="toctree-l4"><a class="reference internal" href="../documentation/valadoc-guide/02-00-command-line-tool.html">2. Command Line Tool</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../documentation/valadoc-guide/03-00-documentation-comment-markup.html">3. Documentation Comment Markup</a><input class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" role="switch" type="checkbox"/><label for="toctree-checkbox-31"><div class="visually-hidden">Toggle navigation of 3. Documentation Comment Markup</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../documentation/valadoc-guide/03-00-documentation-comment-markup/03-01-brief-description.html">3.1.1. Brief Description</a></li>
<li class="toctree-l5"><a class="reference internal" href="../documentation/valadoc-guide/03-00-documentation-comment-markup/03-02-formatting.html">3.1.2. Formatting</a></li>
<li class="toctree-l5"><a class="reference internal" href="../documentation/valadoc-guide/03-00-documentation-comment-markup/03-03-taglets.html">3.1.3. Taglets</a></li>
<li class="toctree-l5"><a class="reference internal" href="../documentation/valadoc-guide/03-00-documentation-comment-markup/03-04-contributing-to-valadoc.html">3.1.4. Contributing to Valadoc</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../plugins.html">Plugins</a><input class="toctree-checkbox" id="toctree-checkbox-32" name="toctree-checkbox-32" role="switch" type="checkbox"/><label for="toctree-checkbox-32"><div class="visually-hidden">Toggle navigation of Plugins</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../plugins/01-type-modules.html">Type Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/02-libpeas.html">Libpeas</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
       <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/vala-lang/vala-docs/edit/main/source/developer-guides/bindings/generating-a-vapi-with-gobject-introspection.rst" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="generating-a-vapi-with-gobject-introspection">
<h1>Generating a VAPI with GObject Introspection<a class="headerlink" href="#generating-a-vapi-with-gobject-introspection" title="Permalink to this heading">¶</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>Vala is designed to use existing libraries that have a C ABI (Application Binary Interface) without the need for runtime bindings. A Vala program requires a Vala API file (<code class="docutils literal notranslate"><span class="pre">.vapi</span></code>) at compile-time for each library used. A VAPI file contains declarations for a library’s classes, methods, etc. in Vala syntax and how to translate them to C.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">vapigen</span></code> tool is used to generate a VAPI file from a GIR (GObject Introspection Repository) file. <code class="docutils literal notranslate"><span class="pre">vapigen</span></code> is usually included with <code class="docutils literal notranslate"><span class="pre">valac</span></code> by the distributions or a separate Vala tools/development package.</p>
<p>The binding generation follows several steps:</p>
<ul class="simple">
<li><p>get the library’s GIR file</p></li>
<li><p>use <code class="docutils literal notranslate"><span class="pre">vapigen</span></code> to generate the VAPI binding from the GIR file</p></li>
<li><p>tweak the binding generation with metadata and custom code</p></li>
</ul>
<p>Also read the <a class="reference internal" href="upstream-guide.html"><span class="doc">Upstream Guide</span></a> for details about adding VAPI generation to a projects’ build system. This includes Autotools integration.</p>
<p>For libraries without annotations for GObject introspection see <a class="reference internal" href="writing-a-vapi-manually.html"><span class="doc">Writing a VAPI Manually</span></a>.</p>
<p>To use the binding at compile time you will still need the C headers and library installed.</p>
</section>
<section id="gobject-introspection-repository-files">
<h2>GObject Introspection Repository Files<a class="headerlink" href="#gobject-introspection-repository-files" title="Permalink to this heading">¶</a></h2>
<p>This section explains how a GIR file is created. This is useful when fixing VAPI generation because it is better to fix the GObject introspection annotations in the source file. Then all bindings can benefit from the fix.</p>
<p>There is also some background information on typelib files and other languages that produce C ABI compatible libraries. This helps put the Vala binding generation process in a wider context.</p>
<p>If a library generates a GIR file it can usually be obtained from your distribution as part of the development files for the library.</p>
<section id="source-code-annotations-and-g-ir-scanner">
<h3>Source Code Annotations and g-ir-scanner<a class="headerlink" href="#source-code-annotations-and-g-ir-scanner" title="Permalink to this heading">¶</a></h3>
<p>A GIR file is an XML file that describes the objects, structures, constants, enumerations and functions of a library’s public interface.</p>
<p>The public interface is identified with the use of documentation comments. The comments are in GTK-Doc format. Here is an example from <a class="reference external" href="https://gitlab.gnome.org/GNOME/gtk/blob/gtk-3-22/gtk/gtkbutton.c">gtkbutton.c</a> of the GTK+ graphical user interface library, version 3.22. The GObject introspection annotations are between the parentheses in the comments:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * gtk_button_new_from_icon_name:</span>
<span class="cm"> * @icon_name: (nullable): an icon name or %NULL</span>
<span class="cm"> * @size: (type int): an icon size (#GtkIconSize)</span>
<span class="cm"> *</span>
<span class="cm"> * Creates a new button containing an icon from the current icon theme.</span>
<span class="cm"> *</span>
<span class="cm"> * If the icon name isn’t known, a “broken image” icon will be</span>
<span class="cm"> * displayed instead. If the current icon theme is changed, the icon</span>
<span class="cm"> * will be updated appropriately.</span>
<span class="cm"> *</span>
<span class="cm"> * This function is a convenience wrapper around gtk_button_new() and</span>
<span class="cm"> * gtk_button_set_image().</span>
<span class="cm"> *</span>
<span class="cm"> * Returns: a new #GtkButton displaying the themed icon</span>
<span class="cm"> *</span>
<span class="cm"> * Since: 3.10</span>
<span class="cm"> */</span>
<span class="n">GtkWidget</span><span class="o">*</span>
<span class="nf">gtk_button_new_from_icon_name</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">gchar</span><span class="w"> </span><span class="o">*</span><span class="n">icon_name</span><span class="p">,</span>
<span class="w">                            </span><span class="n">GtkIconSize</span><span class="w">  </span><span class="n">size</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">GtkWidget</span><span class="w"> </span><span class="o">*</span><span class="n">button</span><span class="p">;</span>
<span class="w">  </span><span class="n">GtkWidget</span><span class="w"> </span><span class="o">*</span><span class="n">image</span><span class="p">;</span>

<span class="w">  </span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_image_new_from_icon_name</span><span class="w"> </span><span class="p">(</span><span class="n">icon_name</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">);</span>
<span class="w">  </span><span class="n">button</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">g_object_new</span><span class="w"> </span><span class="p">(</span><span class="n">GTK_TYPE_BUTTON</span><span class="p">,</span>
<span class="w">                       </span><span class="s">&quot;image&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">image</span><span class="p">,</span>
<span class="w">                       </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">button</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this example the parameter, <code class="docutils literal notranslate"><span class="pre">icon_name</span></code>, has been annotated as nullable. For more details and a list of the annotations read <a class="reference external" href="https://gi.readthedocs.io/en/latest/annotations/giannotations.html">GObject-Introspection Annotations</a>.</p>
<p>The program <code class="docutils literal notranslate"><span class="pre">g-ir-scanner</span></code> is used to read the C source files and generate the GIR. This is how <code class="docutils literal notranslate"><span class="pre">gtk_button_new_from_icon_name</span></code> looks in the Gtk-3.0.gir file:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;constructor</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;new_from_icon_name&quot;</span>
<span class="w">           </span><span class="na">c:identifier=</span><span class="s">&quot;gtk_button_new_from_icon_name&quot;</span>
<span class="w">           </span><span class="na">version=</span><span class="s">&quot;3.10&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;doc</span><span class="w"> </span><span class="na">xml:space=</span><span class="s">&quot;preserve&quot;</span><span class="nt">&gt;</span>Creates<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>button<span class="w"> </span>containing<span class="w"> </span>an<span class="w"> </span>icon<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>current<span class="w"> </span>icon<span class="w"> </span>theme.

If<span class="w"> </span>the<span class="w"> </span>icon<span class="w"> </span>name<span class="w"> </span>isn&#39;t<span class="w"> </span>known,<span class="w"> </span>a<span class="w"> </span>“broken<span class="w"> </span>image”<span class="w"> </span>icon<span class="w"> </span>will<span class="w"> </span>be
displayed<span class="w"> </span>instead.<span class="w"> </span>If<span class="w"> </span>the<span class="w"> </span>current<span class="w"> </span>icon<span class="w"> </span>theme<span class="w"> </span>is<span class="w"> </span>changed,<span class="w"> </span>the<span class="w"> </span>icon
will<span class="w"> </span>be<span class="w"> </span>updated<span class="w"> </span>appropriately.

This<span class="w"> </span>function<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span>convenience<span class="w"> </span>wrapper<span class="w"> </span>around<span class="w"> </span>gtk_button_new()<span class="w"> </span>and
gtk_button_set_image().<span class="nt">&lt;/doc&gt;</span>
<span class="nt">&lt;return-value</span><span class="w"> </span><span class="na">transfer-ownership=</span><span class="s">&quot;none&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;doc</span><span class="w"> </span><span class="na">xml:space=</span><span class="s">&quot;preserve&quot;</span><span class="nt">&gt;</span>a<span class="w"> </span>new<span class="w"> </span>#GtkButton<span class="w"> </span>displaying<span class="w"> </span>the<span class="w"> </span>themed<span class="w"> </span>icon<span class="nt">&lt;/doc&gt;</span>
<span class="w">  </span><span class="nt">&lt;type</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Widget&quot;</span><span class="w"> </span><span class="na">c:type=</span><span class="s">&quot;GtkWidget*&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/return-value&gt;</span>
<span class="nt">&lt;parameters&gt;</span>
<span class="w">  </span><span class="nt">&lt;parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;icon_name&quot;</span>
<span class="w">             </span><span class="na">transfer-ownership=</span><span class="s">&quot;none&quot;</span>
<span class="w">             </span><span class="na">nullable=</span><span class="s">&quot;1&quot;</span>
<span class="w">             </span><span class="na">allow-none=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;doc</span><span class="w"> </span><span class="na">xml:space=</span><span class="s">&quot;preserve&quot;</span><span class="nt">&gt;</span>an<span class="w"> </span>icon<span class="w"> </span>name<span class="w"> </span>or<span class="w"> </span>%NULL<span class="nt">&lt;/doc&gt;</span>
<span class="w">    </span><span class="nt">&lt;type</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;utf8&quot;</span><span class="w"> </span><span class="na">c:type=</span><span class="s">&quot;const gchar*&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/parameter&gt;</span>
<span class="w">  </span><span class="nt">&lt;parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;size&quot;</span><span class="w"> </span><span class="na">transfer-ownership=</span><span class="s">&quot;none&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;doc</span><span class="w"> </span><span class="na">xml:space=</span><span class="s">&quot;preserve&quot;</span><span class="nt">&gt;</span>an<span class="w"> </span>icon<span class="w"> </span>size<span class="w"> </span>(#GtkIconSize)<span class="nt">&lt;/doc&gt;</span>
<span class="w">    </span><span class="nt">&lt;type</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gint&quot;</span><span class="w"> </span><span class="na">c:type=</span><span class="s">&quot;GtkIconSize&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/parameter&gt;</span>
<span class="nt">&lt;/parameters&gt;</span>
<span class="nt">&lt;/constructor&gt;</span>
</pre></div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">icon_name</span></code> parameter has <code class="docutils literal notranslate"><span class="pre">nullable=&quot;1&quot;</span></code>. The documentation comments are also included in the GIR and these can be used by Valadoc to create documentation for the interface. For example here is the <a class="reference external" href="https://valadoc.org/gtk+-3.0/Gtk.Button.Button.from_icon_name.html">Button.from_icon_name</a> documentation at Valadoc.org.</p>
<p>For completeness this next sample shows how <code class="docutils literal notranslate"><span class="pre">Button.from_icon_name</span></code> appears in the gtk+-3.0.vapi:</p>
<div class="highlight-vala notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="nd">CCode</span><span class="w"> </span><span class="p">(</span><span class="n">cheader_filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;gtk/gtk.h&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">type_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;gtk_button_get_type ()&quot;</span><span class="p">)]</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Button</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Gtk</span><span class="p">.</span><span class="n">Bin</span><span class="p">,</span><span class="w"> </span><span class="n">Atk</span><span class="p">.</span><span class="n">Implementor</span><span class="p">,</span><span class="w"> </span><span class="n">Gtk</span><span class="p">.</span><span class="n">Actionable</span><span class="p">,</span><span class="w"> </span><span class="n">Gtk</span><span class="p">.</span><span class="n">Activatable</span><span class="p">,</span><span class="w"> </span><span class="n">Gtk</span><span class="p">.</span><span class="n">Buildable</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="p">[</span><span class="nd">CCode</span><span class="w"> </span><span class="p">(</span><span class="n">has_construct_function</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;GtkWidget*&quot;</span><span class="p">)]</span>
<span class="w">     </span><span class="p">[</span><span class="n">Version</span><span class="w"> </span><span class="p">(</span><span class="n">since</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;3.10&quot;</span><span class="p">)]</span>
<span class="w">     </span><span class="kd">public</span><span class="w"> </span><span class="n">Button</span><span class="p">.</span><span class="n">from_icon_name</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="o">?</span><span class="w"> </span><span class="n">icon_name</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nd">CCode</span><span class="w"> </span><span class="p">(</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;GtkIconSize&quot;</span><span class="p">)]</span><span class="w"> </span><span class="n">Gtk</span><span class="p">.</span><span class="n">IconSize</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Gtk</span><span class="p">.</span><span class="n">IconSize</span><span class="p">.</span><span class="n">BUTTON</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The VAPI has <code class="docutils literal notranslate"><span class="pre">icon_name</span></code> correctly marked as nullable.</p>
<p>For more details on GObject introspection read <a class="reference external" href="https://gi.readthedocs.io/en/latest/">https://gi.readthedocs.io/en/latest/</a>.</p>
</section>
<section id="typelib-files-and-libgirepository">
<h3>Typelib Files and libgirepository<a class="headerlink" href="#typelib-files-and-libgirepository" title="Permalink to this heading">¶</a></h3>
<p>You may come across documentation about generating a GIR from a typelib file, but GIR files generated in this way will have lost relevant information and lead to an awkward binding with Vala.</p>
</section>
<section id="other-languages-that-support-the-c-abi">
<h3>Other Languages that Support the C ABI<a class="headerlink" href="#other-languages-that-support-the-c-abi" title="Permalink to this heading">¶</a></h3>
<p>At present GObject introspection only works with annotations of C code. Other languages, however, can compile libraries that maintain the C ABI. For example Go has the <code class="docutils literal notranslate"><span class="pre">-buildmode=c-shared</span></code> option. This tutorial, <a class="reference external" href="https://medium.com/learning-the-go-programming-language/calling-go-functions-from-other-languages-4c7d8bcc69bf">Calling Go Functions from Other Languages</a> explains more about Go’s <code class="docutils literal notranslate"><span class="pre">c-shared</span></code> build mode. Rust also can produce C ABI compatible code with the <code class="docutils literal notranslate"><span class="pre">extern</span></code> keyword and <code class="docutils literal notranslate"><span class="pre">#[no_mangle]</span></code>. See the ‘Calling Rust code from C’ section of <a class="reference external" href="https://doc.rust-lang.org/book/first-edition/ffi.html">FFI - The Rust Programming Language</a>. GIR files can be used to create bindings for many languages, including Python, Lua, Javascript and Haskell. If Go or Rust or any other language that can compile code to the C ABI can also produce GIR files then it may be possible to automatically generate bindings using existing generators like <code class="docutils literal notranslate"><span class="pre">vapigen</span></code>.</p>
</section>
</section>
<section id="generating-the-vapi-file">
<h2>Generating the VAPI File<a class="headerlink" href="#generating-the-vapi-file" title="Permalink to this heading">¶</a></h2>
<p>To convert the <code class="docutils literal notranslate"><span class="pre">.gir</span></code> file into a Vala API file use:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>vapigen<span class="w"> </span>--library<span class="w"> </span>poppler-glib<span class="w"> </span>poppler-glib/poppler-glib.gir
</pre></div>
</div>
<p>If you are updating an officially maintained vala binding in the source code tree, you can go in the vapi directory and run:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>../vapigen/vapigen<span class="w"> </span>--library<span class="w"> </span>clutter-gtk-1.0<span class="w"> </span>--vapidir<span class="o">=</span>.<span class="w"> </span>--metadatadir<span class="o">=</span>packages/clutter-gtk-1.0/<span class="w"> </span>packages/clutter-gtk-1.0/clutter-gtk-1.0.gir
</pre></div>
</div>
<p>or just:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>make<span class="w"> </span>clutter-gtk-1.0
</pre></div>
</div>
<p>Do not forget to include the packages needed by the library. If the library uses GTK+ and GConf, use:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>vapigen<span class="w"> </span>--pkg<span class="w"> </span>gtk+-2.0<span class="w"> </span>--pkg<span class="w"> </span>gconf-2.0<span class="w"> </span>--library<span class="w"> </span><span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p>Otherwise you’ll get errors like that, or an incomplete binding:</p>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">error: The type name ``GLib.tkWidget&#39; could not be found</span>
</pre></div>
</div>
</section>
<section id="fixing-vapi-generation-with-metadata">
<h2>Fixing VAPI Generation with Metadata<a class="headerlink" href="#fixing-vapi-generation-with-metadata" title="Permalink to this heading">¶</a></h2>
<p>Sometimes it is necessary to fix up the generated VAPI file; for instance, <code class="docutils literal notranslate"><span class="pre">vapigen</span></code> might not identify <code class="docutils literal notranslate"><span class="pre">out</span></code> or <code class="docutils literal notranslate"><span class="pre">ref</span></code> parameters, or identify structures that should generally be put on the stack instead of allocated, and passed by reference to methods.</p>
<p>Instead of updating the VAPI file, and keeping it updated with every upstream API change, <code class="docutils literal notranslate"><span class="pre">vapigen</span></code> output can be tweaked with a <code class="docutils literal notranslate"><span class="pre">.metadata</span></code> file. For instance, in <em>poppler-glib</em> the <em>poppler_page_get_size</em> function has two out parameters, <em>width</em> and <em>height</em>; in order to create a valid Vala signature in our VAPI file, we need to add these lines inside the <code class="docutils literal notranslate"><span class="pre">poppler-glib.metadata</span></code> file:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>poppler_page_get_size.width<span class="w"> </span>is_out=&quot;1&quot;
poppler_page_get_size.height<span class="w"> </span>is_out=&quot;1&quot;
</pre></div>
</div>
<p>Which translates to: “the <em>width</em> parameter of <em>poppler_page_get_size</em> is an out parameter” and “the <em>height</em> parameter of <em>poppler_page_get_size</em> is an out parameter”.</p>
<p>Metadata files must have the same base name as the GIR, but instead of a <code class="docutils literal notranslate"><span class="pre">gir</span></code> extension they use <code class="docutils literal notranslate"><span class="pre">metadata</span></code>.</p>
<p>To get vapigen to pick up your metadata file, you must provide the name of the directory to look for it in:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">vapigen \</span>
<span class="go">    --library foo \</span>
<span class="go">    --pkg bar-1.0 \</span>
<span class="go">    --metadatadir ./metadata/ \</span>
<span class="go">    Foo-1.0.gir</span>
</pre></div>
</div>
<p>GObject Introspection and Vala support different things. Sometimes one not supporting something the other does is a bug, sometimes it is that one has made certain assumptions about APIs that the other does not. If there is a problem generating the VAPI then it is best to work through the problem in this order:</p>
<ol class="arabic simple">
<li><p>Check the C source for missing GObject Introspection annotations, e.g. null</p></li>
<li><p>Check the arguments to <code class="docutils literal notranslate"><span class="pre">g-ir-scanner</span></code>, e.g. C header files</p></li>
<li><p>Add metadata for <code class="docutils literal notranslate"><span class="pre">vapigen</span></code></p></li>
</ol>
<p>For detailed information on the features and syntax of metadata files, see the Vala Manual section on <a class="reference external" href="https://gnome.pages.gitlab.gnome.org/vala/manual/gir-metadata-format.html">GIR metadata format</a>.</p>
</section>
<section id="c-headers">
<h2>C Headers<a class="headerlink" href="#c-headers" title="Permalink to this heading">¶</a></h2>
<p>Most libraries tend to install one header file, which will then include any additional headers. If the VAPI does not have the correct header filename then the best fix is to amened the generation process of the GIR. To include a C header filename in a GIR <code class="docutils literal notranslate"><span class="pre">g-ir-scanner</span></code> has the <code class="docutils literal notranslate"><span class="pre">--c-include</span></code> option. For example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">g-ir-scanner --c-include=example/example.h project_source.c</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">vapigen</span></code> will then use this filename from the GIR.</p>
<p>Some libraries need multiple header files in the VAPI. Using <code class="docutils literal notranslate"><span class="pre">--c-include</span></code> multiple times will allow these to be included in the GIR and so included in the VAPI.</p>
<p>If it is not possible to amend the GIR generation then the header can be included using <code class="docutils literal notranslate"><span class="pre">vapigen</span></code> and metadata. This can be done for a namespace or for a type. For example:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>PnpIds<span class="w"> </span>cheader_filename=&quot;libgnome-desktop/gnome-pnp-ids.h&quot;
</pre></div>
</div>
<section id="duplicate-symbols">
<h3>Duplicate Symbols<a class="headerlink" href="#duplicate-symbols" title="Permalink to this heading">¶</a></h3>
<p>The single most common error seen the first time one tries to generate a VAPI is one about duplicate symbols. Vala has a single scope for methods, virtual methods, signals, and properties. Assuming that the signatures match, vapigen will automatically combine several of these into a single entity–the most extreme example of this is probably a virtual signal, which can combine a signal, virtual method, and method in one item. For example, GIO has the following in GLib.Application:</p>
<div class="highlight-vala notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">HasEmitter</span><span class="p">]</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">virtual</span><span class="w"> </span><span class="kd">signal</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">activate</span><span class="w"> </span><span class="p">();</span>
</pre></div>
</div>
<p>That said, some conflicts cannot be resolved automatically by vapigen and will require some metadata. The most common conflict is when a method, virtual method, or signal disagrees with another method, virtual method, or signal with the same name regarding arguments or return values. For example, <a class="reference external" href="https://developer-old.gnome.org/clutter/stable/ClutterActor.html">ClutterActor</a> has an <a class="reference external" href="https://developer-old.gnome.org/clutter/stable/ClutterActor.html#ClutterActor-event">event signal</a>, which takes a single argument: a <a class="reference external" href="http://developer-old.gnome.org/clutter/stable/clutter-Events.html#ClutterEvent">ClutterEvent</a> intance. It also has an <a class="reference external" href="http://developer-old.gnome.org/clutter/stable/ClutterActor.html#clutter-actor-event">event method</a> which takes two arguments: a ClutterEvent instance and a boolean. In this case, we resolve the conflict by renaming the method to “emit_event”:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>Actor.event#method<span class="w"> </span>name=&quot;emit_event&quot;
</pre></div>
</div>
<p>Another common problem is when a symbol of a subclass has the same name as that of a base class but the signatures do not match. Depending on the situation, you can rename or skip one of the symbols (usually in the subclass).</p>
</section>
<section id="nested-namespaces">
<h3>Nested Namespaces<a class="headerlink" href="#nested-namespaces" title="Permalink to this heading">¶</a></h3>
<p>GIR does not support nested namespaces (<a class="reference external" href="https://bugzilla.gnome.org/show_bug.cgi?id=660879">bug #660879</a>), but Vala does. If you prefer, you can just ignore this Vala feature, but some bindings can be quite a bit cleaner if we make use of it.</p>
<p>A good example of nested namespaces in Vala is moving the hundreds of keysmys in Clutter into a Clutter.Key namespace, allowing us to use Clutter.Key.Right instead of Clutter.KEY_Right. This is accomplished with a single line of metadata:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>KEY_*<span class="w"> </span>skip=false<span class="w"> </span>name=&quot;KEY_(.+)&quot;<span class="w"> </span>parent=&quot;Clutter.Key&quot;
</pre></div>
</div>
<p>We can also use the same technique to group similar functions together, like for the <a class="reference external" href="http://developer-old.gnome.org/gio/stable/gio-GContentType.html">GContentType</a> family in GIO:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>content_type_*<span class="w"> </span>parent=&quot;GLib.ContentType&quot;<span class="w"> </span>name=&quot;content_type_(.*)&quot;
</pre></div>
</div>
</section>
<section id="nullability-of-return-values">
<h3>Nullability of Return Values<a class="headerlink" href="#nullability-of-return-values" title="Permalink to this heading">¶</a></h3>
<p>GIR assumes all pointer return values are nullable (“allow-none” in G-I terminology) and does not provide a way to override this assumption (<a class="reference external" href="https://bugzilla.gnome.org/show_bug.cgi?id=660879">bug #660879</a>). Vala, on the other hand, assumes return values are not nullable unless otherwise otherwise specified, and comparing a non-nullable value to null (e.g., to check for validity) will cause a warning. Luckily, making a value nullable is easy to do from a metadata file, as you can see from this example (for <a class="reference external" href="http://developer-old.gnome.org/clutter/stable/ClutterActor.html#clutter-actor-get-parent">clutter_actor_get_parent</a>):</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>Actor.get_parent<span class="w"> </span>nullable
</pre></div>
</div>
</section>
<section id="variadic-functions">
<h3>Variadic Functions<a class="headerlink" href="#variadic-functions" title="Permalink to this heading">¶</a></h3>
<p>GObject introspection does not currently support variadic methods. It actually generates all the information Vala needs to do so, but it will mark the function as introspectable=”0”, which is the same that happens when you add a “skip” annotation to the method. Therefore, in order to expose these functions in Vala, we need a simple annotation to un-skip the symbol. For example, this is how <a class="reference external" href="http://developer-old.gnome.org/clutter/stable/clutter-Implicit-Animations.html#clutter-actor-animate">clutter_actor_animate</a> is exposed from metadata:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>Actor.animate<span class="w"> </span>skip=false
</pre></div>
</div>
</section>
<section id="ownership-of-struct-fields">
<h3>Ownership of Struct Fields<a class="headerlink" href="#ownership-of-struct-fields" title="Permalink to this heading">¶</a></h3>
<p>GObject introspection does not currently offer a way to specify whether or not fields contain an owned reference. It is therefore impossible for Vala to know whether or not it should ref or copy a value being assigned to this field. Again, this is easy to fix with metadata… using <a class="reference external" href="http://developer.gnome.org/gio/stable/gio-D-Bus-Introspection-Data.html#GDBusAnnotationInfo-struct">GDBusAnnotationInfo</a> as an example:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>DBusAnnotationInfo.*#field<span class="w"> </span>unowned=false
</pre></div>
</div>
</section>
<section id="virtual-methods-without-invokers">
<h3>Virtual Methods Without Invokers<a class="headerlink" href="#virtual-methods-without-invokers" title="Permalink to this heading">¶</a></h3>
<p>Some libraries contain virtual methods without emitters, which GObject introspection does not currently offer a way to annotate (<a class="reference external" href="https://bugzilla.gnome.org/show_bug.cgi?id=730480">bug #730480</a>). Fixing these basically means adding any information that would normally go in annotations to the metadata.</p>
</section>
<section id="abstract-virtual-distinction">
<h3>Abstract/Virtual Distinction<a class="headerlink" href="#abstract-virtual-distinction" title="Permalink to this heading">¶</a></h3>
<p>Vala distinguishes between abstract and virtual methods (virtual methods do not need to be implemented by an class which implements the interface whereas abstract methods do require an implementation) while GIR does not. In order to mark a method as virtual instead of abstract, you could do something like this (from <a class="reference external" href="http://developer-old.gnome.org/gtksourceview/stable/GtkSourceCompletionProposal.html#gtk-source-completion-proposal-equal">gtk_source_completion_proposal_equal</a>):</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>CompletionProposal.equal#virtual_method<span class="w"> </span>virtual
</pre></div>
</div>
</section>
<section id="generic-types">
<h3>Generic Types<a class="headerlink" href="#generic-types" title="Permalink to this heading">¶</a></h3>
<p>GObject Introspection only supports a few different generic types, and that support is hard-coded and cannot currently be extended to other types which should be generic (<a class="reference external" href="https://bugzilla.gnome.org/show_bug.cgi?id=639908">bug #639908</a>). For example, <a class="reference external" href="http://developer-old.gnome.org/glib/unstable/glib-Keyed-Data-Lists.html">GDataList</a> is a generic in Vala but is not supported as such by GObject Introspection, so the the following is necessary for <a class="reference external" href="http://developer.gnome.org/libsoup/stable/libsoup-2.4-HTML-Form-Support.html#soup-form-encode-datalist">soup_form_encode_datalist</a>:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>form_encode_datalist.form_data_set<span class="w"> </span>type_arguments=&quot;string&quot;
</pre></div>
</div>
</section>
<section id="gclosure-types">
<h3>GClosure Types<a class="headerlink" href="#gclosure-types" title="Permalink to this heading">¶</a></h3>
<p>GIR does not provide a way to annotate the type of a callback (<a class="reference external" href="https://bugzilla.gnome.org/show_bug.cgi?id=636812">bug #636812</a>) contained in a <a class="reference external" href="http://developer-old.gnome.org/gobject/stable/gobject-Closures.html">GClosure</a>. Although this is not an error which will cause bindings to not be generated, the result is an API that is extremely difficult to use correctly. For example, you can provide the delegate type of <a class="reference external" href="http://developer-old.gnome.org/clutter/stable/clutter-Key-Bindings.html#clutter-binding-pool-install-closure">clutter_binding_pool_install_closure</a> from the metadata:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>BindingPool.install_closure.closure<span class="w"> </span>type=&quot;owned<span class="w"> </span>BindingActionFunc&quot;
</pre></div>
</div>
</section>
<section id="inheritance">
<h3>Inheritance<a class="headerlink" href="#inheritance" title="Permalink to this heading">¶</a></h3>
<p>GObject Introspection currently only handles inheritance for GObject-derived types (<a class="reference external" href="https://bugzilla.gnome.org/show_bug.cgi?id=560692">bug #560692</a>).  To get around it in metadata you can use “base_type”:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>Buffer<span class="w"> </span>base_type=&quot;Gst.MiniObject&quot;
</pre></div>
</div>
</section>
<section id="asynchronous-finish-functions">
<h3>Asynchronous Finish Functions<a class="headerlink" href="#asynchronous-finish-functions" title="Permalink to this heading">¶</a></h3>
<p>GObject Introspection does not currently offer a way to annotate the relationship between an async function and its corresponding finish function (<a class="reference external" href="https://bugzilla.gnome.org/show_bug.cgi?id=623635">bug #623635</a>).  By default Vala will look for function with the same base name, but a “_finish” suffix, but you can point it to other functions in metadata using “finish_name”:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>Service.lookupv<span class="w"> </span>finish_name=&quot;secret_service_lookup_finish&quot;
</pre></div>
</div>
</section>
<section id="macros">
<h3>Macros<a class="headerlink" href="#macros" title="Permalink to this heading">¶</a></h3>
<p>Since GObject Introspection is focused primarily on runtime bindings for languages such as Python and JavaScript, it ignores preprocessor macros.  Although this decision makes sense for them (you can’t dlsym(3) a macro), Vala is capable of utilizing macros.  However, since no information on macros is included in the GIR the only way to expose macros is by adding them to a *-custom.vala file.</p>
</section>
</section>
<section id="fixing-vapi-generation-with-custom-vala-code">
<h2>Fixing VAPI Generation with Custom Vala Code<a class="headerlink" href="#fixing-vapi-generation-with-custom-vala-code" title="Permalink to this heading">¶</a></h2>
<p>Remember that thing about the world not being perfect? Well, a metadata file isn’t always enough either. Sometimes you’ll need the ability to inject custom Vala code into your VAPI. Technically, this file can have any name and there can be more than one per package, but the convention is to use the same file name and directory as the GIR followed by “-custom.vala”. For instance, our Foo-1.0.gir might have a corresponding metadata file named Foo-1.0-custom.vala. Once you have your custom Vala file, simply include it in the argument list you pass to <code class="docutils literal notranslate"><span class="pre">vapigen</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">vapigen \</span>
<span class="go">    --library foo-1.0 \</span>
<span class="go">    --pkg bar-1.0 \</span>
<span class="go">    --metadatadir ./metadata/ \</span>
<span class="go">    Foo-1.0.gir \</span>
<span class="go">    Foo-1.0-custom.vala</span>
</pre></div>
</div>
<section id="no-generic-methods">
<h3>No Generic Methods<a class="headerlink" href="#no-generic-methods" title="Permalink to this heading">¶</a></h3>
<p>Vala supports generic methods, such as <a class="reference external" href="http://developer.gnome.org/gobject/stable/gobject-The-Base-Object-Type.html#g-object-get">g_object_get</a>, while GObject Introspection does not. Unfortunately, metadata alone cannot currently resolve this issue–you will need to skip the method in metadata and recreate it in custom.vala.</p>
</section>
</section>
<section id="a-note-on-the-deprecated-gidl-method">
<h2>A Note on the Deprecated GIDL Method<a class="headerlink" href="#a-note-on-the-deprecated-gidl-method" title="Permalink to this heading">¶</a></h2>
<p>The traditional approach was to use <a class="reference external" href="https://wiki.gnome.org/Projects/Vala/Bindings/GI">vala-gen-introspect</a> to generate <code class="docutils literal notranslate"><span class="pre">.gi</span></code> files. Then use <code class="docutils literal notranslate"><span class="pre">vapigen</span></code> to generate the VAPI. This method is now deprecated.</p>
<p>For the maintenance of existing bindings see the Vala Manual <a class="reference external" href="https://gnome.pages.gitlab.gnome.org/vala/manual/gidl-metadata-format.html">GIDL metadata format</a>. This metadata format was used to control the generation of the VAPI from a <code class="docutils literal notranslate"><span class="pre">.gi</span></code> file.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="upstream-guide.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Why Distribute Bindings Upstream</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../bindings.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Bindings</div>
                
              </div>
            </a>
        </div>
      
      </footer>

    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Generating a VAPI with GObject Introspection</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#gobject-introspection-repository-files">GObject Introspection Repository Files</a><ul>
<li><a class="reference internal" href="#source-code-annotations-and-g-ir-scanner">Source Code Annotations and g-ir-scanner</a></li>
<li><a class="reference internal" href="#typelib-files-and-libgirepository">Typelib Files and libgirepository</a></li>
<li><a class="reference internal" href="#other-languages-that-support-the-c-abi">Other Languages that Support the C ABI</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generating-the-vapi-file">Generating the VAPI File</a></li>
<li><a class="reference internal" href="#fixing-vapi-generation-with-metadata">Fixing VAPI Generation with Metadata</a></li>
<li><a class="reference internal" href="#c-headers">C Headers</a><ul>
<li><a class="reference internal" href="#duplicate-symbols">Duplicate Symbols</a></li>
<li><a class="reference internal" href="#nested-namespaces">Nested Namespaces</a></li>
<li><a class="reference internal" href="#nullability-of-return-values">Nullability of Return Values</a></li>
<li><a class="reference internal" href="#variadic-functions">Variadic Functions</a></li>
<li><a class="reference internal" href="#ownership-of-struct-fields">Ownership of Struct Fields</a></li>
<li><a class="reference internal" href="#virtual-methods-without-invokers">Virtual Methods Without Invokers</a></li>
<li><a class="reference internal" href="#abstract-virtual-distinction">Abstract/Virtual Distinction</a></li>
<li><a class="reference internal" href="#generic-types">Generic Types</a></li>
<li><a class="reference internal" href="#gclosure-types">GClosure Types</a></li>
<li><a class="reference internal" href="#inheritance">Inheritance</a></li>
<li><a class="reference internal" href="#asynchronous-finish-functions">Asynchronous Finish Functions</a></li>
<li><a class="reference internal" href="#macros">Macros</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fixing-vapi-generation-with-custom-vala-code">Fixing VAPI Generation with Custom Vala Code</a><ul>
<li><a class="reference internal" href="#no-generic-methods">No Generic Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a-note-on-the-deprecated-gidl-method">A Note on the Deprecated GIDL Method</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/scripts/furo.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    </body>
</html>